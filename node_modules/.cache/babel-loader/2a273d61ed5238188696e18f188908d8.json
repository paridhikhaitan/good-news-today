{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ShapeType_1 = require(\"../Enums/ShapeType\");\n\nvar Updater_1 = require(\"./Particle/Updater\");\n\nvar Utils_1 = require(\"./Utils/Utils\");\n\nvar PolygonMaskType_1 = require(\"../Enums/PolygonMaskType\");\n\nvar RotateDirection_1 = require(\"../Enums/RotateDirection\");\n\nvar ColorUtils_1 = require(\"./Utils/ColorUtils\");\n\nvar Particles_1 = require(\"./Options/Particles/Particles\");\n\nvar SizeAnimationStatus_1 = require(\"../Enums/SizeAnimationStatus\");\n\nvar OpacityAnimationStatus_1 = require(\"../Enums/OpacityAnimationStatus\");\n\nvar Shape_1 = require(\"./Options/Particles/Shape/Shape\");\n\nvar Particle = function () {\n  function Particle(container, position, emitter) {\n    var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n\n    this.container = container;\n    this.emitter = emitter;\n    this.fill = true;\n    this.close = true;\n    this.links = [];\n    var options = container.options;\n    var particlesOptions = new Particles_1.Particles();\n    particlesOptions.load(options.particles);\n\n    if (((_b = (_a = emitter === null || emitter === void 0 ? void 0 : emitter.emitterOptions) === null || _a === void 0 ? void 0 : _a.particles) === null || _b === void 0 ? void 0 : _b.shape) !== undefined) {\n      var shapeType = emitter.emitterOptions.particles.shape.type;\n      this.shape = shapeType instanceof Array ? Utils_1.Utils.itemFromArray(shapeType) : shapeType;\n      var shapeOptions = new Shape_1.Shape();\n      shapeOptions.load(emitter.emitterOptions.particles.shape);\n\n      if (this.shape !== undefined) {\n        var shapeData = shapeOptions.options[this.shape];\n\n        if (shapeData !== undefined) {\n          this.shapeData = Utils_1.Utils.deepExtend({}, shapeData instanceof Array ? Utils_1.Utils.itemFromArray(shapeData) : shapeData);\n          this.fill = (_d = (_c = this.shapeData) === null || _c === void 0 ? void 0 : _c.fill) !== null && _d !== void 0 ? _d : this.fill;\n          this.close = (_f = (_e = this.shapeData) === null || _e === void 0 ? void 0 : _e.close) !== null && _f !== void 0 ? _f : this.close;\n        }\n      }\n    } else {\n      var shapeType = particlesOptions.shape.type;\n      this.shape = shapeType instanceof Array ? Utils_1.Utils.itemFromArray(shapeType) : shapeType;\n      var shapeData = particlesOptions.shape.options[this.shape];\n\n      if (shapeData) {\n        this.shapeData = Utils_1.Utils.deepExtend({}, shapeData instanceof Array ? Utils_1.Utils.itemFromArray(shapeData) : shapeData);\n        this.fill = (_h = (_g = this.shapeData) === null || _g === void 0 ? void 0 : _g.fill) !== null && _h !== void 0 ? _h : this.fill;\n        this.close = (_k = (_j = this.shapeData) === null || _j === void 0 ? void 0 : _j.close) !== null && _k !== void 0 ? _k : this.close;\n      }\n    }\n\n    if (((_l = emitter === null || emitter === void 0 ? void 0 : emitter.emitterOptions) === null || _l === void 0 ? void 0 : _l.particles) !== undefined) {\n      particlesOptions.load(emitter.emitterOptions.particles);\n    }\n\n    particlesOptions.load((_m = this.shapeData) === null || _m === void 0 ? void 0 : _m.particles);\n    this.particlesOptions = particlesOptions;\n    container.retina.initParticle(this);\n    var color = this.particlesOptions.color;\n    var sizeValue = (_o = this.sizeValue) !== null && _o !== void 0 ? _o : container.retina.sizeValue;\n    var randomSize = typeof this.particlesOptions.size.random === \"boolean\" ? this.particlesOptions.size.random : this.particlesOptions.size.random.enable;\n    this.size = {\n      value: randomSize && this.randomMinimumSize !== undefined ? Utils_1.Utils.randomInRange(this.randomMinimumSize, sizeValue) * this.container.retina.pixelRatio : sizeValue\n    };\n    this.direction = emitter ? emitter.emitterOptions.direction : this.particlesOptions.move.direction;\n    this.bubble = {};\n    this.angle = this.particlesOptions.rotate.random ? Math.random() * 360 : this.particlesOptions.rotate.value;\n\n    if (this.particlesOptions.rotate.direction == RotateDirection_1.RotateDirection.random) {\n      var index = Math.floor(Math.random() * 2);\n\n      if (index > 0) {\n        this.rotateDirection = RotateDirection_1.RotateDirection.counterClockwise;\n      } else {\n        this.rotateDirection = RotateDirection_1.RotateDirection.clockwise;\n      }\n    } else {\n      this.rotateDirection = this.particlesOptions.rotate.direction;\n    }\n\n    if (this.particlesOptions.size.animation.enable) {\n      this.size.status = SizeAnimationStatus_1.SizeAnimationStatus.increasing;\n      this.size.velocity = ((_p = this.sizeAnimationSpeed) !== null && _p !== void 0 ? _p : container.retina.sizeAnimationSpeed) / 100;\n\n      if (!this.particlesOptions.size.animation.sync) {\n        this.size.velocity = this.size.velocity * Math.random();\n      }\n    }\n\n    if (this.particlesOptions.rotate.animation.enable) {\n      if (!this.particlesOptions.rotate.animation.sync) {\n        this.angle = Math.random() * 360;\n      }\n    }\n\n    this.position = this.calcPosition(this.container, position);\n\n    if (options.polygon.enable && options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline) {\n      this.initialPosition = {\n        x: this.position.x,\n        y: this.position.y\n      };\n    }\n\n    this.offset = {\n      x: 0,\n      y: 0\n    };\n\n    if (this.particlesOptions.collisions.enable) {\n      this.checkOverlap(position);\n    }\n\n    if (color instanceof Array) {\n      this.color = ColorUtils_1.ColorUtils.colorToRgb(Utils_1.Utils.itemFromArray(color));\n    } else {\n      this.color = ColorUtils_1.ColorUtils.colorToRgb(color);\n    }\n\n    var randomOpacity = this.particlesOptions.opacity.random;\n    var opacityValue = this.particlesOptions.opacity.value;\n    this.opacity = {\n      value: randomOpacity.enable ? Utils_1.Utils.randomInRange(randomOpacity.minimumValue, opacityValue) : opacityValue\n    };\n\n    if (this.particlesOptions.opacity.animation.enable) {\n      this.opacity.status = OpacityAnimationStatus_1.OpacityAnimationStatus.increasing;\n      this.opacity.velocity = this.particlesOptions.opacity.animation.speed / 100;\n\n      if (!this.particlesOptions.opacity.animation.sync) {\n        this.opacity.velocity *= Math.random();\n      }\n    }\n\n    this.initialVelocity = this.calculateVelocity();\n    this.velocity = {\n      horizontal: this.initialVelocity.horizontal,\n      vertical: this.initialVelocity.vertical\n    };\n\n    if (this.shape === ShapeType_1.ShapeType.image || this.shape === ShapeType_1.ShapeType.images) {\n      var shape = this.particlesOptions.shape;\n      var index = Utils_1.Utils.arrayRandomIndex(container.images);\n      var image = container.images[index];\n      var optionsImage = shape.image instanceof Array ? shape.image[index] : shape.image;\n      this.image = {\n        data: image,\n        ratio: optionsImage.width / optionsImage.height,\n        replaceColor: optionsImage.replaceColor,\n        src: optionsImage.src\n      };\n\n      if (!this.image.ratio) {\n        this.image.ratio = 1;\n      }\n\n      this.fill = (_q = optionsImage.fill) !== null && _q !== void 0 ? _q : this.fill;\n      this.close = (_r = optionsImage.close) !== null && _r !== void 0 ? _r : this.close;\n    }\n\n    this.stroke = this.particlesOptions.stroke instanceof Array ? Utils_1.Utils.itemFromArray(this.particlesOptions.stroke) : this.particlesOptions.stroke;\n    this.strokeColor = typeof this.stroke.color === \"string\" ? ColorUtils_1.ColorUtils.stringToRgb(this.stroke.color) : ColorUtils_1.ColorUtils.colorToRgb(this.stroke.color);\n    this.shadowColor = typeof this.particlesOptions.shadow.color === \"string\" ? ColorUtils_1.ColorUtils.stringToRgb(this.particlesOptions.shadow.color) : ColorUtils_1.ColorUtils.colorToRgb(this.particlesOptions.shadow.color);\n    this.updater = new Updater_1.Updater(this.container, this);\n  }\n\n  Particle.prototype.update = function (index, delta) {\n    this.links = [];\n    this.updater.update(delta);\n  };\n\n  Particle.prototype.draw = function () {\n    this.container.canvas.drawParticle(this);\n  };\n\n  Particle.prototype.isOverlapping = function () {\n    var container = this.container;\n    var p = this;\n    var collisionFound = false;\n    var iterations = 0;\n\n    for (var _i = 0, _a = container.particles.array.filter(function (t) {\n      return t != p;\n    }); _i < _a.length; _i++) {\n      var p2 = _a[_i];\n      iterations++;\n      var pos1 = {\n        x: p.position.x + p.offset.x,\n        y: p.position.y + p.offset.y\n      };\n      var pos2 = {\n        x: p2.position.x + p2.offset.x,\n        y: p2.position.y + p2.offset.y\n      };\n      var dist = Utils_1.Utils.getDistanceBetweenCoordinates(pos1, pos2);\n\n      if (dist <= p.size.value + p2.size.value) {\n        collisionFound = true;\n        break;\n      }\n    }\n\n    return {\n      collisionFound: collisionFound,\n      iterations: iterations\n    };\n  };\n\n  Particle.prototype.checkOverlap = function (position) {\n    var container = this.container;\n    var p = this;\n    var overlapResult = p.isOverlapping();\n\n    if (overlapResult.iterations >= container.particles.count) {\n      container.particles.remove(this);\n    } else if (overlapResult.collisionFound) {\n      p.position.x = position ? position.x : Math.random() * container.canvas.size.width;\n      p.position.y = position ? position.y : Math.random() * container.canvas.size.height;\n      p.checkOverlap();\n    }\n  };\n\n  Particle.prototype.destroy = function () {};\n\n  Particle.prototype.calcPosition = function (container, position) {\n    var _a, _b;\n\n    var pos = {\n      x: 0,\n      y: 0\n    };\n    var options = container.options;\n\n    if (options.polygon.enable && ((_b = (_a = container.polygon.raw) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > 0) {\n      if (position) {\n        pos.x = position.x;\n        pos.y = position.y;\n      } else {\n        var randomPoint = container.polygon.randomPointInPolygon();\n        pos.x = randomPoint.x;\n        pos.y = randomPoint.y;\n      }\n    } else {\n      pos.x = position ? position.x : Math.random() * container.canvas.size.width;\n      pos.y = position ? position.y : Math.random() * container.canvas.size.height;\n\n      if (pos.x > container.canvas.size.width - this.size.value * 2) {\n        pos.x -= this.size.value;\n      } else if (pos.x < this.size.value * 2) {\n        pos.x += this.size.value;\n      }\n\n      if (pos.y > container.canvas.size.height - this.size.value * 2) {\n        pos.y -= this.size.value;\n      } else if (pos.y < this.size.value * 2) {\n        pos.y += this.size.value;\n      }\n    }\n\n    return pos;\n  };\n\n  Particle.prototype.calculateVelocity = function () {\n    var baseVelocity = Utils_1.Utils.getParticleBaseVelocity(this);\n    var res = {\n      horizontal: 0,\n      vertical: 0\n    };\n\n    if (this.particlesOptions.move.straight) {\n      res.horizontal = baseVelocity.x;\n      res.vertical = baseVelocity.y;\n\n      if (this.particlesOptions.move.random) {\n        res.horizontal *= Math.random();\n        res.vertical *= Math.random();\n      }\n    } else {\n      res.horizontal = baseVelocity.x + Math.random() - 0.5;\n      res.vertical = baseVelocity.y + Math.random() - 0.5;\n    }\n\n    return res;\n  };\n\n  return Particle;\n}();\n\nexports.Particle = Particle;","map":{"version":3,"sources":["/Users/apple/Desktop/twilio/node_modules/tsparticles/dist/Classes/Particle.js"],"names":["Object","defineProperty","exports","value","ShapeType_1","require","Updater_1","Utils_1","PolygonMaskType_1","RotateDirection_1","ColorUtils_1","Particles_1","SizeAnimationStatus_1","OpacityAnimationStatus_1","Shape_1","Particle","container","position","emitter","_a","_b","_c","_d","_e","_f","_g","_h","_j","_k","_l","_m","_o","_p","_q","_r","fill","close","links","options","particlesOptions","Particles","load","particles","emitterOptions","shape","undefined","shapeType","type","Array","Utils","itemFromArray","shapeOptions","Shape","shapeData","deepExtend","retina","initParticle","color","sizeValue","randomSize","size","random","enable","randomMinimumSize","randomInRange","pixelRatio","direction","move","bubble","angle","rotate","Math","RotateDirection","index","floor","rotateDirection","counterClockwise","clockwise","animation","status","SizeAnimationStatus","increasing","velocity","sizeAnimationSpeed","sync","calcPosition","polygon","PolygonMaskType","inline","initialPosition","x","y","offset","collisions","checkOverlap","ColorUtils","colorToRgb","randomOpacity","opacity","opacityValue","minimumValue","OpacityAnimationStatus","speed","initialVelocity","calculateVelocity","horizontal","vertical","ShapeType","image","images","arrayRandomIndex","optionsImage","data","ratio","width","height","replaceColor","src","stroke","strokeColor","stringToRgb","shadowColor","shadow","updater","Updater","prototype","update","delta","draw","canvas","drawParticle","isOverlapping","p","collisionFound","iterations","_i","array","filter","t","length","p2","pos1","pos2","dist","getDistanceBetweenCoordinates","overlapResult","count","remove","destroy","pos","raw","randomPoint","randomPointInPolygon","baseVelocity","getParticleBaseVelocity","res","straight"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ShapeType_1 = require(\"../Enums/ShapeType\");\nvar Updater_1 = require(\"./Particle/Updater\");\nvar Utils_1 = require(\"./Utils/Utils\");\nvar PolygonMaskType_1 = require(\"../Enums/PolygonMaskType\");\nvar RotateDirection_1 = require(\"../Enums/RotateDirection\");\nvar ColorUtils_1 = require(\"./Utils/ColorUtils\");\nvar Particles_1 = require(\"./Options/Particles/Particles\");\nvar SizeAnimationStatus_1 = require(\"../Enums/SizeAnimationStatus\");\nvar OpacityAnimationStatus_1 = require(\"../Enums/OpacityAnimationStatus\");\nvar Shape_1 = require(\"./Options/Particles/Shape/Shape\");\nvar Particle = (function () {\n    function Particle(container, position, emitter) {\n        var _a, _b, _c, _d, _e, _f, _g, _h, _j, _k, _l, _m, _o, _p, _q, _r;\n        this.container = container;\n        this.emitter = emitter;\n        this.fill = true;\n        this.close = true;\n        this.links = [];\n        var options = container.options;\n        var particlesOptions = new Particles_1.Particles();\n        particlesOptions.load(options.particles);\n        if (((_b = (_a = emitter === null || emitter === void 0 ? void 0 : emitter.emitterOptions) === null || _a === void 0 ? void 0 : _a.particles) === null || _b === void 0 ? void 0 : _b.shape) !== undefined) {\n            var shapeType = emitter.emitterOptions.particles.shape.type;\n            this.shape = shapeType instanceof Array ? Utils_1.Utils.itemFromArray(shapeType) : shapeType;\n            var shapeOptions = new Shape_1.Shape();\n            shapeOptions.load(emitter.emitterOptions.particles.shape);\n            if (this.shape !== undefined) {\n                var shapeData = shapeOptions.options[this.shape];\n                if (shapeData !== undefined) {\n                    this.shapeData = Utils_1.Utils.deepExtend({}, shapeData instanceof Array ?\n                        Utils_1.Utils.itemFromArray(shapeData) :\n                        shapeData);\n                    this.fill = (_d = (_c = this.shapeData) === null || _c === void 0 ? void 0 : _c.fill) !== null && _d !== void 0 ? _d : this.fill;\n                    this.close = (_f = (_e = this.shapeData) === null || _e === void 0 ? void 0 : _e.close) !== null && _f !== void 0 ? _f : this.close;\n                }\n            }\n        }\n        else {\n            var shapeType = particlesOptions.shape.type;\n            this.shape = shapeType instanceof Array ? Utils_1.Utils.itemFromArray(shapeType) : shapeType;\n            var shapeData = particlesOptions.shape.options[this.shape];\n            if (shapeData) {\n                this.shapeData = Utils_1.Utils.deepExtend({}, shapeData instanceof Array ?\n                    Utils_1.Utils.itemFromArray(shapeData) :\n                    shapeData);\n                this.fill = (_h = (_g = this.shapeData) === null || _g === void 0 ? void 0 : _g.fill) !== null && _h !== void 0 ? _h : this.fill;\n                this.close = (_k = (_j = this.shapeData) === null || _j === void 0 ? void 0 : _j.close) !== null && _k !== void 0 ? _k : this.close;\n            }\n        }\n        if (((_l = emitter === null || emitter === void 0 ? void 0 : emitter.emitterOptions) === null || _l === void 0 ? void 0 : _l.particles) !== undefined) {\n            particlesOptions.load(emitter.emitterOptions.particles);\n        }\n        particlesOptions.load((_m = this.shapeData) === null || _m === void 0 ? void 0 : _m.particles);\n        this.particlesOptions = particlesOptions;\n        container.retina.initParticle(this);\n        var color = this.particlesOptions.color;\n        var sizeValue = ((_o = this.sizeValue) !== null && _o !== void 0 ? _o : container.retina.sizeValue);\n        var randomSize = typeof this.particlesOptions.size.random === \"boolean\" ?\n            this.particlesOptions.size.random :\n            this.particlesOptions.size.random.enable;\n        this.size = {\n            value: randomSize && this.randomMinimumSize !== undefined ?\n                Utils_1.Utils.randomInRange(this.randomMinimumSize, sizeValue) * this.container.retina.pixelRatio :\n                sizeValue,\n        };\n        this.direction = emitter ? emitter.emitterOptions.direction : this.particlesOptions.move.direction;\n        this.bubble = {};\n        this.angle = this.particlesOptions.rotate.random ? Math.random() * 360 : this.particlesOptions.rotate.value;\n        if (this.particlesOptions.rotate.direction == RotateDirection_1.RotateDirection.random) {\n            var index = Math.floor(Math.random() * 2);\n            if (index > 0) {\n                this.rotateDirection = RotateDirection_1.RotateDirection.counterClockwise;\n            }\n            else {\n                this.rotateDirection = RotateDirection_1.RotateDirection.clockwise;\n            }\n        }\n        else {\n            this.rotateDirection = this.particlesOptions.rotate.direction;\n        }\n        if (this.particlesOptions.size.animation.enable) {\n            this.size.status = SizeAnimationStatus_1.SizeAnimationStatus.increasing;\n            this.size.velocity = ((_p = this.sizeAnimationSpeed) !== null && _p !== void 0 ? _p : container.retina.sizeAnimationSpeed) / 100;\n            if (!this.particlesOptions.size.animation.sync) {\n                this.size.velocity = this.size.velocity * Math.random();\n            }\n        }\n        if (this.particlesOptions.rotate.animation.enable) {\n            if (!this.particlesOptions.rotate.animation.sync) {\n                this.angle = Math.random() * 360;\n            }\n        }\n        this.position = this.calcPosition(this.container, position);\n        if (options.polygon.enable && options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline) {\n            this.initialPosition = {\n                x: this.position.x,\n                y: this.position.y,\n            };\n        }\n        this.offset = {\n            x: 0,\n            y: 0,\n        };\n        if (this.particlesOptions.collisions.enable) {\n            this.checkOverlap(position);\n        }\n        if (color instanceof Array) {\n            this.color = ColorUtils_1.ColorUtils.colorToRgb(Utils_1.Utils.itemFromArray(color));\n        }\n        else {\n            this.color = ColorUtils_1.ColorUtils.colorToRgb(color);\n        }\n        var randomOpacity = this.particlesOptions.opacity.random;\n        var opacityValue = this.particlesOptions.opacity.value;\n        this.opacity = {\n            value: randomOpacity.enable ? Utils_1.Utils.randomInRange(randomOpacity.minimumValue, opacityValue) : opacityValue,\n        };\n        if (this.particlesOptions.opacity.animation.enable) {\n            this.opacity.status = OpacityAnimationStatus_1.OpacityAnimationStatus.increasing;\n            this.opacity.velocity = this.particlesOptions.opacity.animation.speed / 100;\n            if (!this.particlesOptions.opacity.animation.sync) {\n                this.opacity.velocity *= Math.random();\n            }\n        }\n        this.initialVelocity = this.calculateVelocity();\n        this.velocity = {\n            horizontal: this.initialVelocity.horizontal,\n            vertical: this.initialVelocity.vertical,\n        };\n        if (this.shape === ShapeType_1.ShapeType.image || this.shape === ShapeType_1.ShapeType.images) {\n            var shape = this.particlesOptions.shape;\n            var index = Utils_1.Utils.arrayRandomIndex(container.images);\n            var image = container.images[index];\n            var optionsImage = shape.image instanceof Array ? shape.image[index] : shape.image;\n            this.image = {\n                data: image,\n                ratio: optionsImage.width / optionsImage.height,\n                replaceColor: optionsImage.replaceColor,\n                src: optionsImage.src,\n            };\n            if (!this.image.ratio) {\n                this.image.ratio = 1;\n            }\n            this.fill = (_q = optionsImage.fill) !== null && _q !== void 0 ? _q : this.fill;\n            this.close = (_r = optionsImage.close) !== null && _r !== void 0 ? _r : this.close;\n        }\n        this.stroke = this.particlesOptions.stroke instanceof Array ?\n            Utils_1.Utils.itemFromArray(this.particlesOptions.stroke) :\n            this.particlesOptions.stroke;\n        this.strokeColor = typeof this.stroke.color === \"string\" ?\n            ColorUtils_1.ColorUtils.stringToRgb(this.stroke.color) :\n            ColorUtils_1.ColorUtils.colorToRgb(this.stroke.color);\n        this.shadowColor = typeof this.particlesOptions.shadow.color === \"string\" ?\n            ColorUtils_1.ColorUtils.stringToRgb(this.particlesOptions.shadow.color) :\n            ColorUtils_1.ColorUtils.colorToRgb(this.particlesOptions.shadow.color);\n        this.updater = new Updater_1.Updater(this.container, this);\n    }\n    Particle.prototype.update = function (index, delta) {\n        this.links = [];\n        this.updater.update(delta);\n    };\n    Particle.prototype.draw = function () {\n        this.container.canvas.drawParticle(this);\n    };\n    Particle.prototype.isOverlapping = function () {\n        var container = this.container;\n        var p = this;\n        var collisionFound = false;\n        var iterations = 0;\n        for (var _i = 0, _a = container.particles.array.filter(function (t) { return t != p; }); _i < _a.length; _i++) {\n            var p2 = _a[_i];\n            iterations++;\n            var pos1 = {\n                x: p.position.x + p.offset.x,\n                y: p.position.y + p.offset.y\n            };\n            var pos2 = {\n                x: p2.position.x + p2.offset.x,\n                y: p2.position.y + p2.offset.y\n            };\n            var dist = Utils_1.Utils.getDistanceBetweenCoordinates(pos1, pos2);\n            if (dist <= p.size.value + p2.size.value) {\n                collisionFound = true;\n                break;\n            }\n        }\n        return {\n            collisionFound: collisionFound,\n            iterations: iterations,\n        };\n    };\n    Particle.prototype.checkOverlap = function (position) {\n        var container = this.container;\n        var p = this;\n        var overlapResult = p.isOverlapping();\n        if (overlapResult.iterations >= container.particles.count) {\n            container.particles.remove(this);\n        }\n        else if (overlapResult.collisionFound) {\n            p.position.x = position ? position.x : Math.random() * container.canvas.size.width;\n            p.position.y = position ? position.y : Math.random() * container.canvas.size.height;\n            p.checkOverlap();\n        }\n    };\n    Particle.prototype.destroy = function () {\n    };\n    Particle.prototype.calcPosition = function (container, position) {\n        var _a, _b;\n        var pos = { x: 0, y: 0 };\n        var options = container.options;\n        if (options.polygon.enable && ((_b = (_a = container.polygon.raw) === null || _a === void 0 ? void 0 : _a.length) !== null && _b !== void 0 ? _b : 0) > 0) {\n            if (position) {\n                pos.x = position.x;\n                pos.y = position.y;\n            }\n            else {\n                var randomPoint = container.polygon.randomPointInPolygon();\n                pos.x = randomPoint.x;\n                pos.y = randomPoint.y;\n            }\n        }\n        else {\n            pos.x = position ? position.x : Math.random() * container.canvas.size.width;\n            pos.y = position ? position.y : Math.random() * container.canvas.size.height;\n            if (pos.x > container.canvas.size.width - this.size.value * 2) {\n                pos.x -= this.size.value;\n            }\n            else if (pos.x < this.size.value * 2) {\n                pos.x += this.size.value;\n            }\n            if (pos.y > container.canvas.size.height - this.size.value * 2) {\n                pos.y -= this.size.value;\n            }\n            else if (pos.y < this.size.value * 2) {\n                pos.y += this.size.value;\n            }\n        }\n        return pos;\n    };\n    Particle.prototype.calculateVelocity = function () {\n        var baseVelocity = Utils_1.Utils.getParticleBaseVelocity(this);\n        var res = {\n            horizontal: 0,\n            vertical: 0,\n        };\n        if (this.particlesOptions.move.straight) {\n            res.horizontal = baseVelocity.x;\n            res.vertical = baseVelocity.y;\n            if (this.particlesOptions.move.random) {\n                res.horizontal *= Math.random();\n                res.vertical *= Math.random();\n            }\n        }\n        else {\n            res.horizontal = baseVelocity.x + Math.random() - 0.5;\n            res.vertical = baseVelocity.y + Math.random() - 0.5;\n        }\n        return res;\n    };\n    return Particle;\n}());\nexports.Particle = Particle;\n"]},"metadata":{},"sourceType":"script"}
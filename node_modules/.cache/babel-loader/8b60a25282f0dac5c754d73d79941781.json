{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Particle_1 = require(\"./Particle\");\n\nvar PolygonMaskType_1 = require(\"../Enums/PolygonMaskType\");\n\nvar PolygonMaskInlineArrangement_1 = require(\"../Enums/PolygonMaskInlineArrangement\");\n\nvar InteractionManager_1 = require(\"./Interactions/Particles/InteractionManager\");\n\nvar SpatialGrid_1 = require(\"./Utils/SpatialGrid\");\n\nvar Utils_1 = require(\"./Utils/Utils\");\n\nvar HoverMode_1 = require(\"../Enums/Modes/HoverMode\");\n\nvar Grabber_1 = require(\"./Interactions/Mouse/Grabber\");\n\nvar ClickMode_1 = require(\"../Enums/Modes/ClickMode\");\n\nvar Repulser_1 = require(\"./Interactions/Mouse/Repulser\");\n\nvar DivMode_1 = require(\"../Enums/Modes/DivMode\");\n\nvar Bubbler_1 = require(\"./Interactions/Mouse/Bubbler\");\n\nvar Connector_1 = require(\"./Interactions/Mouse/Connector\");\n\nvar Particles = function () {\n  function Particles(container) {\n    this.container = container;\n    this.array = [];\n    this.interactionsEnabled = false;\n    this.spatialGrid = new SpatialGrid_1.SpatialGrid(this.container.canvas.size);\n  }\n\n  Object.defineProperty(Particles.prototype, \"count\", {\n    get: function () {\n      return this.array.length;\n    },\n    enumerable: true,\n    configurable: true\n  });\n\n  Particles.prototype.init = function () {\n    var container = this.container;\n    var options = container.options;\n\n    if (options.polygon.enable && options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline && (options.polygon.inline.arrangement === PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.onePerPoint || options.polygon.inline.arrangement === PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.perPoint)) {\n      container.polygon.drawPointsOnPolygonPath();\n    } else {\n      for (var i = this.array.length; i < options.particles.number.value; i++) {\n        this.addParticle(new Particle_1.Particle(container));\n      }\n    }\n\n    this.interactionsEnabled = options.particles.lineLinked.enable || options.particles.move.attract.enable || options.particles.collisions.enable;\n  };\n\n  Particles.prototype.redraw = function () {\n    this.clear();\n    this.init();\n    this.draw(0);\n  };\n\n  Particles.prototype.removeAt = function (index, quantity) {\n    if (index >= 0 && index <= this.count) {\n      for (var _i = 0, _a = this.array.splice(index, quantity !== null && quantity !== void 0 ? quantity : 1); _i < _a.length; _i++) {\n        var particle = _a[_i];\n        particle.destroy();\n      }\n    }\n  };\n\n  Particles.prototype.remove = function (particle) {\n    this.removeAt(this.array.indexOf(particle));\n  };\n\n  Particles.prototype.update = function (delta) {\n    var container = this.container;\n    var options = container.options;\n\n    for (var i = 0; i < this.array.length; i++) {\n      var particle = this.array[i];\n      Bubbler_1.Bubbler.reset(particle);\n      var stillExists = true;\n\n      for (var _i = 0, _a = container.absorbers; _i < _a.length; _i++) {\n        var absorber = _a[_i];\n        stillExists = absorber.attract(particle);\n\n        if (!stillExists) {\n          break;\n        }\n      }\n\n      if (!stillExists) {\n        continue;\n      }\n\n      particle.update(i, delta);\n    }\n\n    var hoverMode = options.interactivity.events.onHover.mode;\n    var clickMode = options.interactivity.events.onClick.mode;\n    var divMode = options.interactivity.events.onDiv.mode;\n\n    if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.grab, hoverMode)) {\n      Grabber_1.Grabber.grab(container);\n    }\n\n    if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.repulse, hoverMode) || Utils_1.Utils.isInArray(ClickMode_1.ClickMode.repulse, clickMode) || Utils_1.Utils.isInArray(DivMode_1.DivMode.repulse, divMode)) {\n      Repulser_1.Repulser.repulse(container);\n    }\n\n    if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.bubble, hoverMode) || Utils_1.Utils.isInArray(ClickMode_1.ClickMode.bubble, clickMode)) {\n      Bubbler_1.Bubbler.bubble(container);\n    }\n\n    if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.connect, hoverMode)) {\n      Connector_1.Connector.connect(container);\n    }\n\n    for (var _b = 0, _c = this.array; _b < _c.length; _b++) {\n      var particle = _c[_b];\n\n      if (this.interactionsEnabled) {\n        InteractionManager_1.InteractionManager.interact(particle, container);\n      }\n    }\n  };\n\n  Particles.prototype.draw = function (delta) {\n    var container = this.container;\n    var options = container.options;\n    container.canvas.clear();\n    this.update(delta);\n    this.spatialGrid.setGrid(this.array, this.container.canvas.size);\n\n    if (options.polygon.enable && options.polygon.draw.enable) {\n      container.polygon.drawPolygon();\n    }\n\n    for (var _i = 0, _a = container.absorbers; _i < _a.length; _i++) {\n      var absorber = _a[_i];\n      absorber.draw();\n    }\n\n    for (var _b = 0, _c = this.array; _b < _c.length; _b++) {\n      var p = _c[_b];\n      p.draw();\n    }\n  };\n\n  Particles.prototype.clear = function () {\n    this.array = [];\n  };\n\n  Particles.prototype.push = function (nb, mousePosition) {\n    var _a;\n\n    var container = this.container;\n    var options = container.options;\n    this.pushing = true;\n\n    if (options.particles.number.limit > 0) {\n      if (this.array.length + nb > options.particles.number.limit) {\n        this.removeQuantity(this.array.length + nb - options.particles.number.limit);\n      }\n    }\n\n    var pos;\n\n    if (mousePosition) {\n      pos = (_a = mousePosition.position) !== null && _a !== void 0 ? _a : {\n        x: 0,\n        y: 0\n      };\n    }\n\n    for (var i = 0; i < nb; i++) {\n      this.addParticle(new Particle_1.Particle(container, pos));\n    }\n\n    if (!options.particles.move.enable) {\n      this.container.play();\n    }\n\n    this.pushing = false;\n  };\n\n  Particles.prototype.addParticle = function (particle) {\n    this.array.push(particle);\n  };\n\n  Particles.prototype.removeQuantity = function (quantity) {\n    var container = this.container;\n    var options = container.options;\n    this.removeAt(0, quantity);\n\n    if (!options.particles.move.enable) {\n      this.container.play();\n    }\n  };\n\n  return Particles;\n}();\n\nexports.Particles = Particles;","map":{"version":3,"sources":["/Users/apple/Desktop/twilio/node_modules/tsparticles/dist/Classes/Particles.js"],"names":["Object","defineProperty","exports","value","Particle_1","require","PolygonMaskType_1","PolygonMaskInlineArrangement_1","InteractionManager_1","SpatialGrid_1","Utils_1","HoverMode_1","Grabber_1","ClickMode_1","Repulser_1","DivMode_1","Bubbler_1","Connector_1","Particles","container","array","interactionsEnabled","spatialGrid","SpatialGrid","canvas","size","prototype","get","length","enumerable","configurable","init","options","polygon","enable","type","PolygonMaskType","inline","arrangement","PolygonMaskInlineArrangement","onePerPoint","perPoint","drawPointsOnPolygonPath","i","particles","number","addParticle","Particle","lineLinked","move","attract","collisions","redraw","clear","draw","removeAt","index","quantity","count","_i","_a","splice","particle","destroy","remove","indexOf","update","delta","Bubbler","reset","stillExists","absorbers","absorber","hoverMode","interactivity","events","onHover","mode","clickMode","onClick","divMode","onDiv","Utils","isInArray","HoverMode","grab","Grabber","repulse","ClickMode","DivMode","Repulser","bubble","connect","Connector","_b","_c","InteractionManager","interact","setGrid","drawPolygon","p","push","nb","mousePosition","pushing","limit","removeQuantity","pos","position","x","y","play"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Particle_1 = require(\"./Particle\");\nvar PolygonMaskType_1 = require(\"../Enums/PolygonMaskType\");\nvar PolygonMaskInlineArrangement_1 = require(\"../Enums/PolygonMaskInlineArrangement\");\nvar InteractionManager_1 = require(\"./Interactions/Particles/InteractionManager\");\nvar SpatialGrid_1 = require(\"./Utils/SpatialGrid\");\nvar Utils_1 = require(\"./Utils/Utils\");\nvar HoverMode_1 = require(\"../Enums/Modes/HoverMode\");\nvar Grabber_1 = require(\"./Interactions/Mouse/Grabber\");\nvar ClickMode_1 = require(\"../Enums/Modes/ClickMode\");\nvar Repulser_1 = require(\"./Interactions/Mouse/Repulser\");\nvar DivMode_1 = require(\"../Enums/Modes/DivMode\");\nvar Bubbler_1 = require(\"./Interactions/Mouse/Bubbler\");\nvar Connector_1 = require(\"./Interactions/Mouse/Connector\");\nvar Particles = (function () {\n    function Particles(container) {\n        this.container = container;\n        this.array = [];\n        this.interactionsEnabled = false;\n        this.spatialGrid = new SpatialGrid_1.SpatialGrid(this.container.canvas.size);\n    }\n    Object.defineProperty(Particles.prototype, \"count\", {\n        get: function () {\n            return this.array.length;\n        },\n        enumerable: true,\n        configurable: true\n    });\n    Particles.prototype.init = function () {\n        var container = this.container;\n        var options = container.options;\n        if (options.polygon.enable && options.polygon.type === PolygonMaskType_1.PolygonMaskType.inline &&\n            (options.polygon.inline.arrangement === PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.onePerPoint ||\n                options.polygon.inline.arrangement === PolygonMaskInlineArrangement_1.PolygonMaskInlineArrangement.perPoint)) {\n            container.polygon.drawPointsOnPolygonPath();\n        }\n        else {\n            for (var i = this.array.length; i < options.particles.number.value; i++) {\n                this.addParticle(new Particle_1.Particle(container));\n            }\n        }\n        this.interactionsEnabled = options.particles.lineLinked.enable ||\n            options.particles.move.attract.enable ||\n            options.particles.collisions.enable;\n    };\n    Particles.prototype.redraw = function () {\n        this.clear();\n        this.init();\n        this.draw(0);\n    };\n    Particles.prototype.removeAt = function (index, quantity) {\n        if (index >= 0 && index <= this.count) {\n            for (var _i = 0, _a = this.array.splice(index, quantity !== null && quantity !== void 0 ? quantity : 1); _i < _a.length; _i++) {\n                var particle = _a[_i];\n                particle.destroy();\n            }\n        }\n    };\n    Particles.prototype.remove = function (particle) {\n        this.removeAt(this.array.indexOf(particle));\n    };\n    Particles.prototype.update = function (delta) {\n        var container = this.container;\n        var options = container.options;\n        for (var i = 0; i < this.array.length; i++) {\n            var particle = this.array[i];\n            Bubbler_1.Bubbler.reset(particle);\n            var stillExists = true;\n            for (var _i = 0, _a = container.absorbers; _i < _a.length; _i++) {\n                var absorber = _a[_i];\n                stillExists = absorber.attract(particle);\n                if (!stillExists) {\n                    break;\n                }\n            }\n            if (!stillExists) {\n                continue;\n            }\n            particle.update(i, delta);\n        }\n        var hoverMode = options.interactivity.events.onHover.mode;\n        var clickMode = options.interactivity.events.onClick.mode;\n        var divMode = options.interactivity.events.onDiv.mode;\n        if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.grab, hoverMode)) {\n            Grabber_1.Grabber.grab(container);\n        }\n        if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.repulse, hoverMode) ||\n            Utils_1.Utils.isInArray(ClickMode_1.ClickMode.repulse, clickMode) ||\n            Utils_1.Utils.isInArray(DivMode_1.DivMode.repulse, divMode)) {\n            Repulser_1.Repulser.repulse(container);\n        }\n        if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.bubble, hoverMode) || Utils_1.Utils.isInArray(ClickMode_1.ClickMode.bubble, clickMode)) {\n            Bubbler_1.Bubbler.bubble(container);\n        }\n        if (Utils_1.Utils.isInArray(HoverMode_1.HoverMode.connect, hoverMode)) {\n            Connector_1.Connector.connect(container);\n        }\n        for (var _b = 0, _c = this.array; _b < _c.length; _b++) {\n            var particle = _c[_b];\n            if (this.interactionsEnabled) {\n                InteractionManager_1.InteractionManager.interact(particle, container);\n            }\n        }\n    };\n    Particles.prototype.draw = function (delta) {\n        var container = this.container;\n        var options = container.options;\n        container.canvas.clear();\n        this.update(delta);\n        this.spatialGrid.setGrid(this.array, this.container.canvas.size);\n        if (options.polygon.enable && options.polygon.draw.enable) {\n            container.polygon.drawPolygon();\n        }\n        for (var _i = 0, _a = container.absorbers; _i < _a.length; _i++) {\n            var absorber = _a[_i];\n            absorber.draw();\n        }\n        for (var _b = 0, _c = this.array; _b < _c.length; _b++) {\n            var p = _c[_b];\n            p.draw();\n        }\n    };\n    Particles.prototype.clear = function () {\n        this.array = [];\n    };\n    Particles.prototype.push = function (nb, mousePosition) {\n        var _a;\n        var container = this.container;\n        var options = container.options;\n        this.pushing = true;\n        if (options.particles.number.limit > 0) {\n            if ((this.array.length + nb) > options.particles.number.limit) {\n                this.removeQuantity((this.array.length + nb) - options.particles.number.limit);\n            }\n        }\n        var pos;\n        if (mousePosition) {\n            pos = (_a = mousePosition.position) !== null && _a !== void 0 ? _a : { x: 0, y: 0 };\n        }\n        for (var i = 0; i < nb; i++) {\n            this.addParticle(new Particle_1.Particle(container, pos));\n        }\n        if (!options.particles.move.enable) {\n            this.container.play();\n        }\n        this.pushing = false;\n    };\n    Particles.prototype.addParticle = function (particle) {\n        this.array.push(particle);\n    };\n    Particles.prototype.removeQuantity = function (quantity) {\n        var container = this.container;\n        var options = container.options;\n        this.removeAt(0, quantity);\n        if (!options.particles.move.enable) {\n            this.container.play();\n        }\n    };\n    return Particles;\n}());\nexports.Particles = Particles;\n"]},"metadata":{},"sourceType":"script"}
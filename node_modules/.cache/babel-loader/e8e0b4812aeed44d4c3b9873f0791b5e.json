{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar ClickMode_1 = require(\"../../../Enums/Modes/ClickMode\");\n\nvar HoverMode_1 = require(\"../../../Enums/Modes/HoverMode\");\n\nvar OutMode_1 = require(\"../../../Enums/OutMode\");\n\nvar Utils_1 = require(\"../../Utils/Utils\");\n\nvar DivMode_1 = require(\"../../../Enums/Modes/DivMode\");\n\nvar Constants_1 = require(\"../../Utils/Constants\");\n\nvar Repulser = function () {\n  function Repulser() {}\n\n  Repulser.repulse = function (container) {\n    var options = container.options;\n    var interactivity = options.interactivity;\n    var hoverEnabled = interactivity.events.onHover.enable;\n    var clickEnabled = interactivity.events.onClick.enable;\n    var mouseMoveStatus = container.interactivity.status === Constants_1.Constants.mouseMoveEvent;\n    var hoverMode = interactivity.events.onHover.mode;\n    var clickMode = interactivity.events.onClick.mode;\n    var divMode = interactivity.events.onDiv.mode;\n\n    if (mouseMoveStatus && hoverEnabled && Utils_1.Utils.isInArray(HoverMode_1.HoverMode.repulse, hoverMode)) {\n      this.hoverRepulse(container);\n    } else if (clickEnabled && Utils_1.Utils.isInArray(ClickMode_1.ClickMode.repulse, clickMode)) {\n      this.clickRepulse(container);\n    } else if (interactivity.events.onDiv.enable && Utils_1.Utils.isInArray(DivMode_1.DivMode.repulse, divMode)) {\n      this.divRepulse(container);\n    }\n  };\n\n  Repulser.divRepulse = function (container) {\n    var options = container.options;\n    var elem = document.getElementById(options.interactivity.events.onDiv.elementId);\n\n    if (!elem) {\n      return;\n    }\n\n    var pos = {\n      x: elem.offsetLeft + elem.offsetWidth / 2,\n      y: elem.offsetTop + elem.offsetHeight / 2\n    };\n    var divWidth = elem.offsetWidth / 2;\n\n    if (container.retina.isRetina) {\n      pos.x *= container.retina.pixelRatio;\n      pos.y *= container.retina.pixelRatio;\n      divWidth *= container.retina.pixelRatio;\n    }\n\n    var repulseRadius = divWidth;\n    this.processRepulse(container, pos, repulseRadius);\n  };\n\n  Repulser.hoverRepulse = function (container) {\n    var mousePos = container.interactivity.mouse.position;\n\n    if (!mousePos) {\n      return;\n    }\n\n    var repulseRadius = container.retina.repulseModeDistance;\n    this.processRepulse(container, mousePos, repulseRadius);\n  };\n\n  Repulser.processRepulse = function (container, position, repulseRadius) {\n    for (var _i = 0, _a = container.particles.spatialGrid.queryRadius(position, repulseRadius); _i < _a.length; _i++) {\n      var particle = _a[_i];\n      var dx = particle.position.x - position.x;\n      var dy = particle.position.y - position.y;\n      var dist = Math.sqrt(dx * dx + dy * dy);\n      var normVec = {\n        x: dx / dist,\n        y: dy / dist\n      };\n      var velocity = container.options.interactivity.modes.repulse.speed * 100;\n      var repulseFactor = Utils_1.Utils.clamp((1 - Math.pow(dist / repulseRadius, 2)) * velocity, 0, 50);\n      var outMode = particle.particlesOptions.move.outMode;\n      var sizeValue = particle.size.value;\n      var pos = {\n        x: particle.position.x + normVec.x * repulseFactor,\n        y: particle.position.y + normVec.y * repulseFactor\n      };\n\n      if (outMode === OutMode_1.OutMode.bounce || outMode === OutMode_1.OutMode.bounceVertical || outMode === OutMode_1.OutMode.bounceHorizontal) {\n        var isInside = {\n          horizontal: pos.x - sizeValue > 0 && pos.x + sizeValue < container.canvas.size.width,\n          vertical: pos.y - sizeValue > 0 && pos.y + sizeValue < container.canvas.size.height\n        };\n\n        if (outMode === OutMode_1.OutMode.bounceVertical || isInside.horizontal) {\n          particle.position.x = pos.x;\n        }\n\n        if (outMode === OutMode_1.OutMode.bounceHorizontal || isInside.vertical) {\n          particle.position.y = pos.y;\n        }\n      } else {\n        particle.position.x = pos.x;\n        particle.position.y = pos.y;\n      }\n    }\n  };\n\n  Repulser.clickRepulse = function (container) {\n    if (!container.repulse.finish) {\n      if (!container.repulse.count) {\n        container.repulse.count = 0;\n      }\n\n      container.repulse.count++;\n\n      if (container.repulse.count === container.particles.count) {\n        container.repulse.finish = true;\n      }\n    }\n\n    if (container.repulse.clicking) {\n      var repulseDistance = container.retina.repulseModeDistance;\n      var repulseRadius = Math.pow(repulseDistance / 6, 3);\n      var mouseClickPos = container.interactivity.mouse.clickPosition;\n\n      if (mouseClickPos === undefined) {\n        return;\n      }\n\n      for (var _i = 0, _a = container.particles.spatialGrid.queryRadius(mouseClickPos, repulseRadius); _i < _a.length; _i++) {\n        var particle = _a[_i];\n\n        if ((particle === null || particle === void 0 ? void 0 : particle.position) === undefined) {\n          continue;\n        }\n\n        var dx = mouseClickPos.x - particle.position.x;\n        var dy = mouseClickPos.y - particle.position.y;\n        var d = dx * dx + dy * dy;\n        var velocity = container.options.interactivity.modes.repulse.speed;\n        var force = -repulseRadius * velocity / d;\n\n        if (d <= repulseRadius) {\n          container.repulse.particles.push(particle);\n          this.processClickRepulse(container, particle, dx, dy, force);\n        }\n      }\n    } else if (container.repulse.clicking === false) {\n      for (var _b = 0, _c = container.repulse.particles; _b < _c.length; _b++) {\n        var particle = _c[_b];\n        particle.velocity.horizontal = particle.initialVelocity.horizontal;\n        particle.velocity.vertical = particle.initialVelocity.vertical;\n      }\n\n      container.repulse.particles = [];\n    }\n  };\n\n  Repulser.processClickRepulse = function (container, particle, dx, dy, force) {\n    var options = container.options;\n    var f = Math.atan2(dy, dx);\n    particle.velocity.horizontal = force * Math.cos(f);\n    particle.velocity.vertical = force * Math.sin(f);\n    var outMode = options.particles.move.outMode;\n\n    if (outMode === OutMode_1.OutMode.bounce || outMode === OutMode_1.OutMode.bounceHorizontal || outMode === OutMode_1.OutMode.bounceVertical) {\n      var pos = {\n        x: particle.position.x + particle.velocity.horizontal,\n        y: particle.position.y + particle.velocity.vertical\n      };\n\n      if (outMode !== OutMode_1.OutMode.bounceVertical) {\n        if (pos.x + particle.size.value > container.canvas.size.width || pos.x - particle.size.value < 0) {\n          particle.velocity.horizontal = -particle.velocity.horizontal;\n        }\n      }\n\n      if (outMode !== OutMode_1.OutMode.bounceHorizontal) {\n        if (pos.y + particle.size.value > container.canvas.size.height || pos.y - particle.size.value < 0) {\n          particle.velocity.vertical = -particle.velocity.vertical;\n        }\n      }\n    }\n  };\n\n  return Repulser;\n}();\n\nexports.Repulser = Repulser;","map":{"version":3,"sources":["/Users/apple/Desktop/twilio/node_modules/tsparticles/dist/Classes/Interactions/Mouse/Repulser.js"],"names":["Object","defineProperty","exports","value","ClickMode_1","require","HoverMode_1","OutMode_1","Utils_1","DivMode_1","Constants_1","Repulser","repulse","container","options","interactivity","hoverEnabled","events","onHover","enable","clickEnabled","onClick","mouseMoveStatus","status","Constants","mouseMoveEvent","hoverMode","mode","clickMode","divMode","onDiv","Utils","isInArray","HoverMode","hoverRepulse","ClickMode","clickRepulse","DivMode","divRepulse","elem","document","getElementById","elementId","pos","x","offsetLeft","offsetWidth","y","offsetTop","offsetHeight","divWidth","retina","isRetina","pixelRatio","repulseRadius","processRepulse","mousePos","mouse","position","repulseModeDistance","_i","_a","particles","spatialGrid","queryRadius","length","particle","dx","dy","dist","Math","sqrt","normVec","velocity","modes","speed","repulseFactor","clamp","pow","outMode","particlesOptions","move","sizeValue","size","OutMode","bounce","bounceVertical","bounceHorizontal","isInside","horizontal","canvas","width","vertical","height","finish","count","clicking","repulseDistance","mouseClickPos","clickPosition","undefined","d","force","push","processClickRepulse","_b","_c","initialVelocity","f","atan2","cos","sin"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar ClickMode_1 = require(\"../../../Enums/Modes/ClickMode\");\nvar HoverMode_1 = require(\"../../../Enums/Modes/HoverMode\");\nvar OutMode_1 = require(\"../../../Enums/OutMode\");\nvar Utils_1 = require(\"../../Utils/Utils\");\nvar DivMode_1 = require(\"../../../Enums/Modes/DivMode\");\nvar Constants_1 = require(\"../../Utils/Constants\");\nvar Repulser = (function () {\n    function Repulser() {\n    }\n    Repulser.repulse = function (container) {\n        var options = container.options;\n        var interactivity = options.interactivity;\n        var hoverEnabled = interactivity.events.onHover.enable;\n        var clickEnabled = interactivity.events.onClick.enable;\n        var mouseMoveStatus = container.interactivity.status === Constants_1.Constants.mouseMoveEvent;\n        var hoverMode = interactivity.events.onHover.mode;\n        var clickMode = interactivity.events.onClick.mode;\n        var divMode = interactivity.events.onDiv.mode;\n        if (mouseMoveStatus && hoverEnabled && Utils_1.Utils.isInArray(HoverMode_1.HoverMode.repulse, hoverMode)) {\n            this.hoverRepulse(container);\n        }\n        else if (clickEnabled && Utils_1.Utils.isInArray(ClickMode_1.ClickMode.repulse, clickMode)) {\n            this.clickRepulse(container);\n        }\n        else if (interactivity.events.onDiv.enable && Utils_1.Utils.isInArray(DivMode_1.DivMode.repulse, divMode)) {\n            this.divRepulse(container);\n        }\n    };\n    Repulser.divRepulse = function (container) {\n        var options = container.options;\n        var elem = document.getElementById(options.interactivity.events.onDiv.elementId);\n        if (!elem) {\n            return;\n        }\n        var pos = {\n            x: (elem.offsetLeft + elem.offsetWidth / 2),\n            y: (elem.offsetTop + elem.offsetHeight / 2),\n        };\n        var divWidth = elem.offsetWidth / 2;\n        if (container.retina.isRetina) {\n            pos.x *= container.retina.pixelRatio;\n            pos.y *= container.retina.pixelRatio;\n            divWidth *= container.retina.pixelRatio;\n        }\n        var repulseRadius = divWidth;\n        this.processRepulse(container, pos, repulseRadius);\n    };\n    Repulser.hoverRepulse = function (container) {\n        var mousePos = container.interactivity.mouse.position;\n        if (!mousePos) {\n            return;\n        }\n        var repulseRadius = container.retina.repulseModeDistance;\n        this.processRepulse(container, mousePos, repulseRadius);\n    };\n    Repulser.processRepulse = function (container, position, repulseRadius) {\n        for (var _i = 0, _a = container.particles.spatialGrid.queryRadius(position, repulseRadius); _i < _a.length; _i++) {\n            var particle = _a[_i];\n            var dx = particle.position.x - position.x;\n            var dy = particle.position.y - position.y;\n            var dist = Math.sqrt(dx * dx + dy * dy);\n            var normVec = {\n                x: dx / dist,\n                y: dy / dist,\n            };\n            var velocity = container.options.interactivity.modes.repulse.speed * 100;\n            var repulseFactor = Utils_1.Utils.clamp((1 - Math.pow(dist / repulseRadius, 2)) * velocity, 0, 50);\n            var outMode = particle.particlesOptions.move.outMode;\n            var sizeValue = particle.size.value;\n            var pos = {\n                x: particle.position.x + normVec.x * repulseFactor,\n                y: particle.position.y + normVec.y * repulseFactor,\n            };\n            if (outMode === OutMode_1.OutMode.bounce ||\n                outMode === OutMode_1.OutMode.bounceVertical ||\n                outMode === OutMode_1.OutMode.bounceHorizontal) {\n                var isInside = {\n                    horizontal: pos.x - sizeValue > 0 && pos.x + sizeValue < container.canvas.size.width,\n                    vertical: pos.y - sizeValue > 0 && pos.y + sizeValue < container.canvas.size.height,\n                };\n                if (outMode === OutMode_1.OutMode.bounceVertical || isInside.horizontal) {\n                    particle.position.x = pos.x;\n                }\n                if (outMode === OutMode_1.OutMode.bounceHorizontal || isInside.vertical) {\n                    particle.position.y = pos.y;\n                }\n            }\n            else {\n                particle.position.x = pos.x;\n                particle.position.y = pos.y;\n            }\n        }\n    };\n    Repulser.clickRepulse = function (container) {\n        if (!container.repulse.finish) {\n            if (!container.repulse.count) {\n                container.repulse.count = 0;\n            }\n            container.repulse.count++;\n            if (container.repulse.count === container.particles.count) {\n                container.repulse.finish = true;\n            }\n        }\n        if (container.repulse.clicking) {\n            var repulseDistance = container.retina.repulseModeDistance;\n            var repulseRadius = Math.pow(repulseDistance / 6, 3);\n            var mouseClickPos = container.interactivity.mouse.clickPosition;\n            if (mouseClickPos === undefined) {\n                return;\n            }\n            for (var _i = 0, _a = container.particles.spatialGrid.queryRadius(mouseClickPos, repulseRadius); _i < _a.length; _i++) {\n                var particle = _a[_i];\n                if ((particle === null || particle === void 0 ? void 0 : particle.position) === undefined) {\n                    continue;\n                }\n                var dx = mouseClickPos.x - particle.position.x;\n                var dy = mouseClickPos.y - particle.position.y;\n                var d = dx * dx + dy * dy;\n                var velocity = container.options.interactivity.modes.repulse.speed;\n                var force = -repulseRadius * velocity / d;\n                if (d <= repulseRadius) {\n                    container.repulse.particles.push(particle);\n                    this.processClickRepulse(container, particle, dx, dy, force);\n                }\n            }\n        }\n        else if (container.repulse.clicking === false) {\n            for (var _b = 0, _c = container.repulse.particles; _b < _c.length; _b++) {\n                var particle = _c[_b];\n                particle.velocity.horizontal = particle.initialVelocity.horizontal;\n                particle.velocity.vertical = particle.initialVelocity.vertical;\n            }\n            container.repulse.particles = [];\n        }\n    };\n    Repulser.processClickRepulse = function (container, particle, dx, dy, force) {\n        var options = container.options;\n        var f = Math.atan2(dy, dx);\n        particle.velocity.horizontal = force * Math.cos(f);\n        particle.velocity.vertical = force * Math.sin(f);\n        var outMode = options.particles.move.outMode;\n        if (outMode === OutMode_1.OutMode.bounce || outMode === OutMode_1.OutMode.bounceHorizontal || outMode === OutMode_1.OutMode.bounceVertical) {\n            var pos = {\n                x: particle.position.x + particle.velocity.horizontal,\n                y: particle.position.y + particle.velocity.vertical,\n            };\n            if (outMode !== OutMode_1.OutMode.bounceVertical) {\n                if (pos.x + particle.size.value > container.canvas.size.width ||\n                    pos.x - particle.size.value < 0) {\n                    particle.velocity.horizontal = -particle.velocity.horizontal;\n                }\n            }\n            if (outMode !== OutMode_1.OutMode.bounceHorizontal) {\n                if (pos.y + particle.size.value > container.canvas.size.height ||\n                    pos.y - particle.size.value < 0) {\n                    particle.velocity.vertical = -particle.velocity.vertical;\n                }\n            }\n        }\n    };\n    return Repulser;\n}());\nexports.Repulser = Repulser;\n"]},"metadata":{},"sourceType":"script"}
{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar tslib_1 = require(\"tslib\");\n\nvar Canvas_1 = require(\"./Canvas\");\n\nvar EventListeners_1 = require(\"./Utils/EventListeners\");\n\nvar Particles_1 = require(\"./Particles\");\n\nvar Retina_1 = require(\"./Retina\");\n\nvar ShapeType_1 = require(\"../Enums/ShapeType\");\n\nvar PolygonMask_1 = require(\"./PolygonMask\");\n\nvar FrameManager_1 = require(\"./FrameManager\");\n\nvar Options_1 = require(\"./Options/Options\");\n\nvar Utils_1 = require(\"./Utils/Utils\");\n\nvar Presets_1 = require(\"./Utils/Presets\");\n\nvar Emitter_1 = require(\"./Emitter\");\n\nvar Absorber_1 = require(\"./Absorber\");\n\nvar Container = function () {\n  function Container(id, params) {\n    var presets = [];\n\n    for (var _i = 2; _i < arguments.length; _i++) {\n      presets[_i - 2] = arguments[_i];\n    }\n\n    this.started = false;\n    this.destroyed = false;\n    this.id = id;\n    this.paused = true;\n    this.sourceOptions = params;\n    this.lastFrameTime = 0;\n    this.pageHidden = false;\n    this.retina = new Retina_1.Retina(this);\n    this.canvas = new Canvas_1.Canvas(this);\n    this.particles = new Particles_1.Particles(this);\n    this.polygon = new PolygonMask_1.PolygonMask(this);\n    this.drawer = new FrameManager_1.FrameManager(this);\n    this.interactivity = {\n      mouse: {}\n    };\n    this.images = [];\n    this.bubble = {};\n    this.repulse = {\n      particles: []\n    };\n    this.emitters = [];\n    this.absorbers = [];\n    this.options = new Options_1.Options();\n\n    for (var _a = 0, presets_1 = presets; _a < presets_1.length; _a++) {\n      var preset = presets_1[_a];\n      this.options.load(Presets_1.Presets.getPreset(preset));\n    }\n\n    if (this.sourceOptions) {\n      this.options.load(this.sourceOptions);\n    }\n\n    this.eventListeners = new EventListeners_1.EventListeners(this);\n  }\n\n  Container.requestFrame = function (callback) {\n    return window.customRequestAnimationFrame(callback);\n  };\n\n  Container.cancelAnimation = function (handle) {\n    window.cancelAnimationFrame(handle);\n  };\n\n  Container.prototype.play = function () {\n    var _this = this;\n\n    if (this.paused) {\n      this.lastFrameTime = performance.now();\n      this.paused = false;\n\n      for (var _i = 0, _a = this.emitters; _i < _a.length; _i++) {\n        var emitter = _a[_i];\n        emitter.start();\n      }\n    }\n\n    this.drawAnimationFrame = Container.requestFrame(function (t) {\n      return _this.drawer.nextFrame(t);\n    });\n  };\n\n  Container.prototype.pause = function () {\n    if (this.drawAnimationFrame !== undefined) {\n      for (var _i = 0, _a = this.emitters; _i < _a.length; _i++) {\n        var emitter = _a[_i];\n        emitter.stop();\n      }\n\n      Container.cancelAnimation(this.drawAnimationFrame);\n      delete this.drawAnimationFrame;\n      this.paused = true;\n    }\n  };\n\n  Container.prototype.densityAutoParticles = function () {\n    if (!(this.canvas.element && this.options.particles.number.density.enable)) {\n      return;\n    }\n\n    var area = this.canvas.element.width * this.canvas.element.height / 1000;\n\n    if (this.retina.isRetina) {\n      area /= this.retina.pixelRatio * 2;\n    }\n\n    var optParticlesNumber = this.options.particles.number.value;\n    var density = this.options.particles.number.density.area;\n    var particlesNumber = area * optParticlesNumber / density;\n    var particlesCount = this.particles.count;\n\n    if (particlesCount < particlesNumber) {\n      this.particles.push(Math.abs(particlesNumber - particlesCount));\n    } else if (particlesCount > particlesNumber) {\n      this.particles.removeQuantity(particlesCount - particlesNumber);\n    }\n  };\n\n  Container.prototype.destroy = function () {\n    this.stop();\n    this.retina.reset();\n    this.canvas.destroy();\n    delete this.interactivity;\n    delete this.options;\n    delete this.retina;\n    delete this.canvas;\n    delete this.particles;\n    delete this.polygon;\n    delete this.bubble;\n    delete this.repulse;\n    delete this.images;\n    delete this.drawer;\n    delete this.eventListeners;\n    this.destroyed = true;\n  };\n\n  Container.prototype.exportImg = function (callback) {\n    this.exportImage(callback);\n  };\n\n  Container.prototype.exportImage = function (callback, type, quality) {\n    var _a;\n\n    return (_a = this.canvas.element) === null || _a === void 0 ? void 0 : _a.toBlob(callback, type !== null && type !== void 0 ? type : \"image/png\", quality);\n  };\n\n  Container.prototype.exportConfiguration = function () {\n    return JSON.stringify(this.options, undefined, 2);\n  };\n\n  Container.prototype.refresh = function () {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      return tslib_1.__generator(this, function (_a) {\n        switch (_a.label) {\n          case 0:\n            this.stop();\n            return [4, this.start()];\n\n          case 1:\n            _a.sent();\n\n            return [2];\n        }\n      });\n    });\n  };\n\n  Container.prototype.stop = function () {\n    if (!this.started) {\n      return;\n    }\n\n    this.started = false;\n    this.eventListeners.removeListeners();\n    this.pause();\n    this.images = [];\n    this.particles.clear();\n    this.retina.reset();\n    this.canvas.clear();\n    this.polygon.reset();\n    this.emitters = [];\n    this.absorbers = [];\n    delete this.particles.lineLinkedColor;\n  };\n\n  Container.prototype.start = function () {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var _i, _a, character, character, _b, _c, optionsImage;\n\n      return tslib_1.__generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            if (this.started) {\n              return [2];\n            }\n\n            this.started = true;\n            this.eventListeners.addListeners();\n            return [4, this.polygon.init()];\n\n          case 1:\n            _d.sent();\n\n            if (!(Utils_1.Utils.isInArray(ShapeType_1.ShapeType.char, this.options.particles.shape.type) || Utils_1.Utils.isInArray(ShapeType_1.ShapeType.character, this.options.particles.shape.type))) return [3, 8];\n            if (!(this.options.particles.shape.character instanceof Array)) return [3, 6];\n            _i = 0, _a = this.options.particles.shape.character;\n            _d.label = 2;\n\n          case 2:\n            if (!(_i < _a.length)) return [3, 5];\n            character = _a[_i];\n            return [4, Utils_1.Utils.loadFont(character)];\n\n          case 3:\n            _d.sent();\n\n            _d.label = 4;\n\n          case 4:\n            _i++;\n            return [3, 2];\n\n          case 5:\n            return [3, 8];\n\n          case 6:\n            character = this.options.particles.shape.character;\n            if (!(character !== undefined)) return [3, 8];\n            return [4, Utils_1.Utils.loadFont(character)];\n\n          case 7:\n            _d.sent();\n\n            _d.label = 8;\n\n          case 8:\n            if (!(Utils_1.Utils.isInArray(ShapeType_1.ShapeType.image, this.options.particles.shape.type) || Utils_1.Utils.isInArray(ShapeType_1.ShapeType.images, this.options.particles.shape.type))) return [3, 15];\n            if (!(this.options.particles.shape.image instanceof Array)) return [3, 13];\n            _b = 0, _c = this.options.particles.shape.image;\n            _d.label = 9;\n\n          case 9:\n            if (!(_b < _c.length)) return [3, 12];\n            optionsImage = _c[_b];\n            return [4, this.loadImageShape(optionsImage)];\n\n          case 10:\n            _d.sent();\n\n            _d.label = 11;\n\n          case 11:\n            _b++;\n            return [3, 9];\n\n          case 12:\n            return [3, 15];\n\n          case 13:\n            return [4, this.loadImageShape(this.options.particles.shape.image)];\n\n          case 14:\n            _d.sent();\n\n            _d.label = 15;\n\n          case 15:\n            this.init();\n            this.play();\n            return [2];\n        }\n      });\n    });\n  };\n\n  Container.prototype.loadImageShape = function (imageShape) {\n    return tslib_1.__awaiter(this, void 0, void 0, function () {\n      var _a, _b, _c;\n\n      return tslib_1.__generator(this, function (_d) {\n        switch (_d.label) {\n          case 0:\n            _d.trys.push([0, 2,, 3]);\n\n            _b = (_a = this.images).push;\n            return [4, Utils_1.Utils.loadImage(imageShape)];\n\n          case 1:\n            _b.apply(_a, [_d.sent()]);\n\n            return [3, 3];\n\n          case 2:\n            _c = _d.sent();\n            return [3, 3];\n\n          case 3:\n            return [2];\n        }\n      });\n    });\n  };\n\n  Container.prototype.init = function () {\n    this.retina.init();\n    this.canvas.init();\n    this.particles.init();\n\n    if (this.options.emitters instanceof Array) {\n      for (var _i = 0, _a = this.options.emitters; _i < _a.length; _i++) {\n        var emitterOptions = _a[_i];\n        var emitter = new Emitter_1.Emitter(this, emitterOptions);\n        this.emitters.push(emitter);\n      }\n    } else {\n      var emitterOptions = this.options.emitters;\n      var emitter = new Emitter_1.Emitter(this, emitterOptions);\n      this.emitters.push(emitter);\n    }\n\n    if (this.options.absorbers instanceof Array) {\n      for (var _b = 0, _c = this.options.absorbers; _b < _c.length; _b++) {\n        var absorberOptions = _c[_b];\n        var absorber = new Absorber_1.Absorber(this, absorberOptions);\n        this.absorbers.push(absorber);\n      }\n    } else {\n      var absorberOptions = this.options.absorbers;\n      var absorber = new Absorber_1.Absorber(this, absorberOptions);\n      this.absorbers.push(absorber);\n    }\n\n    this.densityAutoParticles();\n  };\n\n  return Container;\n}();\n\nexports.Container = Container;","map":{"version":3,"sources":["/Users/apple/Desktop/twilio/node_modules/tsparticles/dist/Classes/Container.js"],"names":["Object","defineProperty","exports","value","tslib_1","require","Canvas_1","EventListeners_1","Particles_1","Retina_1","ShapeType_1","PolygonMask_1","FrameManager_1","Options_1","Utils_1","Presets_1","Emitter_1","Absorber_1","Container","id","params","presets","_i","arguments","length","started","destroyed","paused","sourceOptions","lastFrameTime","pageHidden","retina","Retina","canvas","Canvas","particles","Particles","polygon","PolygonMask","drawer","FrameManager","interactivity","mouse","images","bubble","repulse","emitters","absorbers","options","Options","_a","presets_1","preset","load","Presets","getPreset","eventListeners","EventListeners","requestFrame","callback","window","customRequestAnimationFrame","cancelAnimation","handle","cancelAnimationFrame","prototype","play","_this","performance","now","emitter","start","drawAnimationFrame","t","nextFrame","pause","undefined","stop","densityAutoParticles","element","number","density","enable","area","width","height","isRetina","pixelRatio","optParticlesNumber","particlesNumber","particlesCount","count","push","Math","abs","removeQuantity","destroy","reset","exportImg","exportImage","type","quality","toBlob","exportConfiguration","JSON","stringify","refresh","__awaiter","__generator","label","sent","removeListeners","clear","lineLinkedColor","character","_b","_c","optionsImage","_d","addListeners","init","Utils","isInArray","ShapeType","char","shape","Array","loadFont","image","loadImageShape","imageShape","trys","loadImage","apply","emitterOptions","Emitter","absorberOptions","absorber","Absorber"],"mappings":"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","sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar tslib_1 = require(\"tslib\");\nvar Canvas_1 = require(\"./Canvas\");\nvar EventListeners_1 = require(\"./Utils/EventListeners\");\nvar Particles_1 = require(\"./Particles\");\nvar Retina_1 = require(\"./Retina\");\nvar ShapeType_1 = require(\"../Enums/ShapeType\");\nvar PolygonMask_1 = require(\"./PolygonMask\");\nvar FrameManager_1 = require(\"./FrameManager\");\nvar Options_1 = require(\"./Options/Options\");\nvar Utils_1 = require(\"./Utils/Utils\");\nvar Presets_1 = require(\"./Utils/Presets\");\nvar Emitter_1 = require(\"./Emitter\");\nvar Absorber_1 = require(\"./Absorber\");\nvar Container = (function () {\n    function Container(id, params) {\n        var presets = [];\n        for (var _i = 2; _i < arguments.length; _i++) {\n            presets[_i - 2] = arguments[_i];\n        }\n        this.started = false;\n        this.destroyed = false;\n        this.id = id;\n        this.paused = true;\n        this.sourceOptions = params;\n        this.lastFrameTime = 0;\n        this.pageHidden = false;\n        this.retina = new Retina_1.Retina(this);\n        this.canvas = new Canvas_1.Canvas(this);\n        this.particles = new Particles_1.Particles(this);\n        this.polygon = new PolygonMask_1.PolygonMask(this);\n        this.drawer = new FrameManager_1.FrameManager(this);\n        this.interactivity = {\n            mouse: {},\n        };\n        this.images = [];\n        this.bubble = {};\n        this.repulse = { particles: [] };\n        this.emitters = [];\n        this.absorbers = [];\n        this.options = new Options_1.Options();\n        for (var _a = 0, presets_1 = presets; _a < presets_1.length; _a++) {\n            var preset = presets_1[_a];\n            this.options.load(Presets_1.Presets.getPreset(preset));\n        }\n        if (this.sourceOptions) {\n            this.options.load(this.sourceOptions);\n        }\n        this.eventListeners = new EventListeners_1.EventListeners(this);\n    }\n    Container.requestFrame = function (callback) {\n        return window.customRequestAnimationFrame(callback);\n    };\n    Container.cancelAnimation = function (handle) {\n        window.cancelAnimationFrame(handle);\n    };\n    Container.prototype.play = function () {\n        var _this = this;\n        if (this.paused) {\n            this.lastFrameTime = performance.now();\n            this.paused = false;\n            for (var _i = 0, _a = this.emitters; _i < _a.length; _i++) {\n                var emitter = _a[_i];\n                emitter.start();\n            }\n        }\n        this.drawAnimationFrame = Container.requestFrame(function (t) { return _this.drawer.nextFrame(t); });\n    };\n    Container.prototype.pause = function () {\n        if (this.drawAnimationFrame !== undefined) {\n            for (var _i = 0, _a = this.emitters; _i < _a.length; _i++) {\n                var emitter = _a[_i];\n                emitter.stop();\n            }\n            Container.cancelAnimation(this.drawAnimationFrame);\n            delete this.drawAnimationFrame;\n            this.paused = true;\n        }\n    };\n    Container.prototype.densityAutoParticles = function () {\n        if (!(this.canvas.element && this.options.particles.number.density.enable)) {\n            return;\n        }\n        var area = this.canvas.element.width * this.canvas.element.height / 1000;\n        if (this.retina.isRetina) {\n            area /= this.retina.pixelRatio * 2;\n        }\n        var optParticlesNumber = this.options.particles.number.value;\n        var density = this.options.particles.number.density.area;\n        var particlesNumber = area * optParticlesNumber / density;\n        var particlesCount = this.particles.count;\n        if (particlesCount < particlesNumber) {\n            this.particles.push(Math.abs(particlesNumber - particlesCount));\n        }\n        else if (particlesCount > particlesNumber) {\n            this.particles.removeQuantity(particlesCount - particlesNumber);\n        }\n    };\n    Container.prototype.destroy = function () {\n        this.stop();\n        this.retina.reset();\n        this.canvas.destroy();\n        delete this.interactivity;\n        delete this.options;\n        delete this.retina;\n        delete this.canvas;\n        delete this.particles;\n        delete this.polygon;\n        delete this.bubble;\n        delete this.repulse;\n        delete this.images;\n        delete this.drawer;\n        delete this.eventListeners;\n        this.destroyed = true;\n    };\n    Container.prototype.exportImg = function (callback) {\n        this.exportImage(callback);\n    };\n    Container.prototype.exportImage = function (callback, type, quality) {\n        var _a;\n        return (_a = this.canvas.element) === null || _a === void 0 ? void 0 : _a.toBlob(callback, type !== null && type !== void 0 ? type : \"image/png\", quality);\n    };\n    Container.prototype.exportConfiguration = function () {\n        return JSON.stringify(this.options, undefined, 2);\n    };\n    Container.prototype.refresh = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            return tslib_1.__generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        this.stop();\n                        return [4, this.start()];\n                    case 1:\n                        _a.sent();\n                        return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.stop = function () {\n        if (!this.started) {\n            return;\n        }\n        this.started = false;\n        this.eventListeners.removeListeners();\n        this.pause();\n        this.images = [];\n        this.particles.clear();\n        this.retina.reset();\n        this.canvas.clear();\n        this.polygon.reset();\n        this.emitters = [];\n        this.absorbers = [];\n        delete this.particles.lineLinkedColor;\n    };\n    Container.prototype.start = function () {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _i, _a, character, character, _b, _c, optionsImage;\n            return tslib_1.__generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        if (this.started) {\n                            return [2];\n                        }\n                        this.started = true;\n                        this.eventListeners.addListeners();\n                        return [4, this.polygon.init()];\n                    case 1:\n                        _d.sent();\n                        if (!(Utils_1.Utils.isInArray(ShapeType_1.ShapeType.char, this.options.particles.shape.type) ||\n                            Utils_1.Utils.isInArray(ShapeType_1.ShapeType.character, this.options.particles.shape.type))) return [3, 8];\n                        if (!(this.options.particles.shape.character instanceof Array)) return [3, 6];\n                        _i = 0, _a = this.options.particles.shape.character;\n                        _d.label = 2;\n                    case 2:\n                        if (!(_i < _a.length)) return [3, 5];\n                        character = _a[_i];\n                        return [4, Utils_1.Utils.loadFont(character)];\n                    case 3:\n                        _d.sent();\n                        _d.label = 4;\n                    case 4:\n                        _i++;\n                        return [3, 2];\n                    case 5: return [3, 8];\n                    case 6:\n                        character = this.options.particles.shape.character;\n                        if (!(character !== undefined)) return [3, 8];\n                        return [4, Utils_1.Utils.loadFont(character)];\n                    case 7:\n                        _d.sent();\n                        _d.label = 8;\n                    case 8:\n                        if (!(Utils_1.Utils.isInArray(ShapeType_1.ShapeType.image, this.options.particles.shape.type) ||\n                            Utils_1.Utils.isInArray(ShapeType_1.ShapeType.images, this.options.particles.shape.type))) return [3, 15];\n                        if (!(this.options.particles.shape.image instanceof Array)) return [3, 13];\n                        _b = 0, _c = this.options.particles.shape.image;\n                        _d.label = 9;\n                    case 9:\n                        if (!(_b < _c.length)) return [3, 12];\n                        optionsImage = _c[_b];\n                        return [4, this.loadImageShape(optionsImage)];\n                    case 10:\n                        _d.sent();\n                        _d.label = 11;\n                    case 11:\n                        _b++;\n                        return [3, 9];\n                    case 12: return [3, 15];\n                    case 13: return [4, this.loadImageShape(this.options.particles.shape.image)];\n                    case 14:\n                        _d.sent();\n                        _d.label = 15;\n                    case 15:\n                        this.init();\n                        this.play();\n                        return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.loadImageShape = function (imageShape) {\n        return tslib_1.__awaiter(this, void 0, void 0, function () {\n            var _a, _b, _c;\n            return tslib_1.__generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        _d.trys.push([0, 2, , 3]);\n                        _b = (_a = this.images).push;\n                        return [4, Utils_1.Utils.loadImage(imageShape)];\n                    case 1:\n                        _b.apply(_a, [_d.sent()]);\n                        return [3, 3];\n                    case 2:\n                        _c = _d.sent();\n                        return [3, 3];\n                    case 3: return [2];\n                }\n            });\n        });\n    };\n    Container.prototype.init = function () {\n        this.retina.init();\n        this.canvas.init();\n        this.particles.init();\n        if (this.options.emitters instanceof Array) {\n            for (var _i = 0, _a = this.options.emitters; _i < _a.length; _i++) {\n                var emitterOptions = _a[_i];\n                var emitter = new Emitter_1.Emitter(this, emitterOptions);\n                this.emitters.push(emitter);\n            }\n        }\n        else {\n            var emitterOptions = this.options.emitters;\n            var emitter = new Emitter_1.Emitter(this, emitterOptions);\n            this.emitters.push(emitter);\n        }\n        if (this.options.absorbers instanceof Array) {\n            for (var _b = 0, _c = this.options.absorbers; _b < _c.length; _b++) {\n                var absorberOptions = _c[_b];\n                var absorber = new Absorber_1.Absorber(this, absorberOptions);\n                this.absorbers.push(absorber);\n            }\n        }\n        else {\n            var absorberOptions = this.options.absorbers;\n            var absorber = new Absorber_1.Absorber(this, absorberOptions);\n            this.absorbers.push(absorber);\n        }\n        this.densityAutoParticles();\n    };\n    return Container;\n}());\nexports.Container = Container;\n"]},"metadata":{},"sourceType":"script"}